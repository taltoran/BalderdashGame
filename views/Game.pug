//extends ../layout

block content
  html
    head
      link(href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800', rel='stylesheet', type='text/css')
      link(href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic', rel='stylesheet', type='text/css')
      //- stylesheets
      link(rel='stylesheet', href='/stylesheets/style.css')
      link(rel='stylesheet', href='/stylesheets/index.css')
      style.
        .loader {
        border: 10px solid #f3f3f3;
        border-radius: 50%;
        border-top: 10px solid #3498db;
        width: 80px;
        height: 80px;
        -webkit-animation: spin 1.5s linear infinite;
        animation: spin 1.5s linear infinite;
        margin:0 auto;"
        }

        @-webkit-keyframes spin {
        0% { -webkit-transform: rotate(0deg); }
        100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
        }

        h1.centered {
        padding-top: 1cm;
        text-align: center;
        }

        div.mainScreen {
        
        }

        div.loadScreen {

        }

        div.roundOne {

        }

        body {
          color: black;
        }

    body
      div#loadingScreen
        //.mainScreen
        div.loadScreen
          p#game(hidden data-name=gameName)
          h1.centered= 'Waiting For Players! (Room Join Code = '+gameName+')'          
          .loader
          h1.centered Joined Players
        p(style="visibility:hidden")= userName
        p.hosts
          ul.messages
        .message_template
          .message
            .avatar
              .userID
                .user
                .time
            .text_wrapper
              .text

  
  - var myAnswer
  - var myWords = wordsList
  - var myChosenWords= {};
  

  div#gamediv(style='text-align:center')
    //h1#gameHeading(style='padding-top:50px') Game Category
    //h1#categoryHeading= categories
      div
      //- for (var i = 0; i<4; i++)
        -var randomNum= Math.floor(Math.random() * (myWords.length))
        -var myQuestion = myWords[randomNum].question

        if (myChosenWords[myQuestion] == "true")
          p Its true
          -var myCount = 0
          - while (myChosenWords[myQuestion] == "true" && myCount<30)
            - randomNum= Math.floor(Math.random() * (myWords.length))
            - myCount +=1
          -myCount = 0
        else
          p Its false
          - myChosenWords[myQuestion] = "true"

        p=randomNum
        button.sendQuestion(name=myQuestion)= myQuestion
        
        each value in myWords
        button.sendQuestion(name=value.question)= value.question
        p.sendAnswer(name=value.answer style="visibility:hidden")=value.answer
        br
        br
  div
  .gamediv2(style='text-align:center; padding-top:50px')
      div
      //p=myWords[0].question
      //-var name = $(".sendQuestion").attr("name");
      
      h1#chosenQuestion
      //p#chosenAnswer=myWordsDict[name]
      //input#inputAnswer(placeholder='Type your answer')
      //input#sendAnswer(type='button', value='send')
      .chat_window
        //.top_menu
          .title Chat
        //ul.messages
        .bottom_wrapper.clearfix
          .message_input_wrapper
            input#mes_input.message_input(placeholder='Type your message here...' )
          #send_btn.send_message(style='padding-top:10px')
            .icon
            button.text Send

  div
  .gamediv3(style='text-align:center; padding-top:50px')
      div
        h1#chosenQuestionTwo
              //p(id="answers")
                - var languages = {'php': -1, 'node': 2, 'ruby':1}
              //div   
              //each value, key in languages
                  p= key + ": " + value
                .chat_window
                .top_menu
                  .title Chat
        ul.myAnswers
        .answerTemplate
          .answerMessages
            .answerMessage
              .answerAvatar
                .answerUserID
                  .answerUser
                  .answerTime
              .answerText_wrapper(style='padding-top:10px')
                button.answerText 
        //ul.messages
        //div

  div
  #scores(style='text-align:center; padding-top:50px')

  div
  #finalscores(style='text-align:center; padding-top:50px')

  
  div#answerWait(style='text-align:center; padding-top:50px')
    h1(text-align: center) Waiting For Players to Enter Answers
    h1.roundNumber
    .loader

  div#answerChosen(style='text-align:center; padding-top:50px')
    h1(text-align: center) Waiting For Players to Choose Answers
    h1.roundNumber
    .loader
    

  div#questionWait(style='text-align:center; padding-top:50px')
    h1(text-align: center) Waiting For Host to Choose Question
    h1.roundNumber
    .loader

  

        




        

block scripts
  //script(src='/scripts/_game.js', type='text/javascript')
  script(type='text/javascript')                                         
    | var myWordsList =!{JSON.stringify(wordsList)}; 
    | var myCategories =!{JSON.stringify(categories)}; 
    | var myRounds = !{JSON.stringify(rounds)}; 
    | var myNumberOfPlayers = !{JSON.stringify(numberOfPlayers)};
    | var myGameName =  !{JSON.stringify(gameName)};
  script(src='/scripts/_game.js') 
   
  script(src='/socket.io/socket.io.js')
  script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js')
  //script(src='../js/templates.js', type='text/javascript')

  script.
    $("#answerWait").hide();
    $("#answerChosen").hide();
    $("#questionWait").hide();
    $("#gamediv").hide();
    $("div.gamediv2").hide();
    $("div.gamediv3").hide();
    $(".answerUser").hide();

    

    $(".sendQuestion").click(function(){
      $("#loadingScreen").hide();
      $("div.gamediv2").show();
      
    });
  
    

    


      